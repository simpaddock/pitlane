{% extends baseLayout %}
{% load frontend_extras %}
{% block ogp %}
{% if isDriverStandings %}
<meta property="og:title" content="{{ season.name }}: Driver standings" />
<meta property="og:url" content="{{config.url }}/seasons/{{season.id}}/drivers/" />
<meta property="og:image" content="{{config.logo }}" />
{% else %}
<meta property="og:title" content="{{ season.name }}: Team standings" />
<meta property="og:url" content="{{config.url }}/seasons/{{season.id}}/teams/" />
<meta property="og:image" content="{{config.logo }}/" />
{% endif %}
{% endblock %}
{% block content %}
  <h1>{{ title }} </h1>
  {% if season.round == 0 %}
    The tournament has not started yet.
  {% endif %}
  {% spaceless %}
  {% for key, result in resultList %}
  <div class="columns col-12 result-row medal-{{ key | add:1 }}">
    <div class="medal medal-{{ key | add:1 }}">
      <span class="position">
          {{ key | add:1 }}
      </span>
    </div>
    <div class="column col-2 col-xs-10">
      {% if isDriverStandings %}
      <div class="columns half-top-margin">
        <div class="col-12">
          <span>{{result.firstName}}</span>
          <span class="driver-name">{{result.lastName}}</span>
        </div>
        <div class="col-12">
          <span>{{result.team}}</span>
        </div>
      </div>
      {% endif %}
       
      {% if not isDriverStandings %}
        <div class="columns half-top-margin">
          <div class="col-12 team-name">
            {{result.team}}
          </div>
          <div class="col-12">
            {% if result.vehicleImage %}
              <img class="car-vendor" src="/media/{{result.vehicleImage}}">
            {% endif %}
            <span>{{result.vehicle}}</span>
          </div>
        </div>
      {% endif %}
    </div>
    {% if isDriverStandings %}
    <div class="column col-1 full-top-margin columns  entry-meta-container hide-xs">
      <div class="column col-6">
        {% if isDriverStandings %}
          <div class="driver-number">{{result.number | safe }} </div>
        {% endif %}
      </div>
      <div class="column col-6">
        {{result.sum}}
      </div>
    </div>
    {% endif %} 
    {% if not isDriverStandings %}
    <div class="column col-1 full-top-margin columns hide-xs">
      <div class="column col-6">
        {{result.sum}}
      </div>
    </div>
    {% endif %}
    <div class="column col-8 columns hide-xs">
        {% for race in races %}
        <div class="column full-top-margin race-result-container">
          <a href="/races/{{race.id}}/">
            <span class="race-name">
              <img class="race-flag" title="{{race.name}}" src="/media/{{ race.track.country.flag }}">
            </span>
            <span>
              
              {% with points=result.points|index:forloop.counter0 %}
                {% with racePoints=points %}
                  {% if isDriverStandings and racePoints == 0 %}
                    {% with state=result.finishstates|index:forloop.counter0 %}
                      {% if state == 'Finished Normally'%}
                        {{ racePoints }}
                      {% else %}
                        {{ state }}
                      {% endif %}
                    {% endwith %}
                  {% else %}
                    {% if racePoints is not None %}
                      {{racePoints}}
                    {% else %}
                      -
                    {% endif %}
                  {% endif %}
                {% endwith %}
               
              {% endwith %}
            </span>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
  
  {% endfor %}
  {% endspaceless %}
{% endblock %}